(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{566:function(e,t,a){"use strict";a.r(t);var o=a(0),l=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"create-a-claim-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-claim-type"}},[e._v("#")]),e._v(" Create A Claim Type")]),e._v(" "),a("p",[e._v("Next we need to decide what claims our worker will report to the Oracle module. The Claim must implement the oracle's "),a("a",{attrs:{href:"https://github.com/relevant-community/oracle/blob/main/x/oracle/exported/claim.go",target:"_blank",rel:"noopener noreferrer"}},[e._v("abstract Claim interface"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("Our claim will have two fields, "),a("code",[e._v("price")]),e._v(" (usd price of Atom) and "),a("code",[e._v("blockHeight")]),e._v(" - the point in time we are submitting our cliam.")]),e._v(" "),a("p",[e._v('The id for our cliam will be a constant string "AtomUsdClaim"')]),e._v(" "),a("h2",{attrs:{id:"set-the-claim-type-constant"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-the-claim-type-constant"}},[e._v("#")]),e._v(" Set The Claim Type constant")]),e._v(" "),a("p",[e._v("in "),a("code",[e._v("x/<your_module>/types/keys.go")]),e._v(" add")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"Y29uc3QgQXRvbVVzZENsYWltID0gJnF1b3Q7QXRvbVVzZENsYWltJnF1b3Q7Cg=="}}),e._v(" "),a("h2",{attrs:{id:"create-a-proto-message-for-the-claim"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-proto-message-for-the-claim"}},[e._v("#")]),e._v(" Create a proto Message for the claim:")]),e._v(" "),a("p",[e._v("add a new message inside the "),a("code",[e._v("proto/<your_module>")]),e._v(" folder\nex: https://github.com/relevant-community/oracle/tree/main/proto/atom/atom.proto")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"protobuf",base64:"bWVzc2FnZSBBdG9tVXNkIHsKICBzdHJpbmcgcHJpY2UgPSAxIFsKCQkoZ29nb3Byb3RvLmpzb250YWcpICAgID0gJnF1b3Q7cHJpY2UmcXVvdDssCgkJKGdvZ29wcm90by5tb3JldGFncykgICA9ICZxdW90O3lhbWw6XCZxdW90O3ByaWNlXCZxdW90OyZxdW90OywKCQkoZ29nb3Byb3RvLmN1c3RvbXR5cGUpID0gJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcy5EZWMmcXVvdDssCgkJKGdvZ29wcm90by5udWxsYWJsZSkgICA9IGZhbHNlCgldOwogIGludDY0IGJsb2NrSGVpZ2h0ID0gMjsKfQo="}}),e._v(" "),a("h2",{attrs:{id:"implement-the-claim-interface-of-the-oracle-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implement-the-claim-interface-of-the-oracle-module"}},[e._v("#")]),e._v(" Implement the Claim interface of the Oracle Module")]),e._v(" "),a("p",[e._v("create a new file "),a("code",[e._v("x/<your_module>/types/atomUsd.go")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSB0eXBlcwoKaW1wb3J0ICgKCWZtdCAmcXVvdDtmbXQmcXVvdDsKCglzZGsgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcyZxdW90OwoJJnF1b3Q7Z2l0aHViLmNvbS90ZW5kZXJtaW50L3RlbmRlcm1pbnQvY3J5cHRvL3RtaGFzaCZxdW90OwoJdG1ieXRlcyAmcXVvdDtnaXRodWIuY29tL3RlbmRlcm1pbnQvdGVuZGVybWludC9saWJzL2J5dGVzJnF1b3Q7CikKCi8vIEF0b21Vc2QgY3JlYXRlcyBhIG5ldyBBdG9tVXNkIGNsYWltCmZ1bmMgTmV3QXRvbVVzZChibG9ja0hlaWdodCBpbnQ2NCwgcHJpY2Ugc3RyaW5nKSAqQXRvbVVzZCB7CglkZWNQcmljZSwgZXJyIDo9IHNkay5OZXdEZWNGcm9tU3RyKHByaWNlKQoJaWYgZXJyICE9IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoJcmV0dXJuICZhbXA7QXRvbVVzZHsKCQlQcmljZTogICAgICAgZGVjUHJpY2UsCgkJQmxvY2tIZWlnaHQ6IGJsb2NrSGVpZ2h0LAoJfQp9CgovLyBDbGFpbSBtZXRob2RzIHRoYXQgaW1wbGVtZW50IHRoZSBhYnN0cmFjdCBDbGFpbSBpbnRlcmZhY2Ugb2YgdGhlIG9yYWNsZSBtb2R1bGUKCi8vIFZhbGlkYXRlQmFzaWMgcGVyZm9ybXMgYmFzaWMgdmFsaWRhdGlvbiBvZiB0aGUgY2xhaW0KZnVuYyAoYyAqQXRvbVVzZCkgVmFsaWRhdGVCYXNpYygpIGVycm9yIHsKCWlmIGMuQmxvY2tIZWlnaHQgJmx0OyAxIHsKCQlyZXR1cm4gZm10LkVycm9yZigmcXVvdDtpbnZhbGlkIGNsYWltIGhlaWdodDogJWQmcXVvdDssIGMuQmxvY2tIZWlnaHQpCgl9CglyZXR1cm4gbmlsCn0KCi8vIFR5cGUgcmV0dXJuIHR5cGUgb2Ygb3JhY2xlIENsYWltCmZ1bmMgKGMgKkF0b21Vc2QpIFR5cGUoKSBzdHJpbmcgewoJcmV0dXJuIEF0b21DbGFpbQp9CgovLyBIYXNoIHJldHVybnMgdGhlIGhhc2ggb2YgYW4gQ2xhaW0gQ29udGVudC4KZnVuYyAoYyAqQXRvbVVzZCkgSGFzaCgpIHRtYnl0ZXMuSGV4Qnl0ZXMgewoJYnosIGVyciA6PSBjLk1hcnNoYWwoKQoJaWYgZXJyICE9IG5pbCB7CgkJcGFuaWMoZXJyKQoJfQoJcmV0dXJuIHRtaGFzaC5TdW0oYnopCn0KCi8vIEdldFJvdW5kSUQgcmV0dXJucyB0aGUgYmxvY2sgaGVpZ2h0IGZvciB3aGVuIHRoZSBkYXRhIHdhcyB1c2VkLgpmdW5jIChjICpBdG9tVXNkKSBHZXRSb3VuZElEKCkgdWludDY0IHsKCXJldHVybiB1aW50NjQoYy5CbG9ja0hlaWdodCkKfQoKLy8gR2V0Q29uY2Vuc3VzS2V5IHJldHVybnMgYSBrZXkgdGhlIG9yYWNsZSB3aWxsIHVzZSBvZiB2b3RlIGNvbnNlbnN1cwovLyBmb3IgZGV0ZXJtaW5pc3RpYyByZXN1bHRzIGl0IHNob3VsZCBiZSB0aGUgc2FtZSBhcyB0aGUgaGFzaCBvZiB0aGUgY29udGVudAovLyBmb3Igbm9uZGV0ZXJtaW5pc3RpYyBjb250ZW50IGl0IHNob3VsZCBiZSBhIGNvbnN0YW50CmZ1bmMgKGMgKkF0b21Vc2QpIEdldENvbmNlbnN1c0tleSgpIHN0cmluZyB7CglyZXR1cm4gJnF1b3Q7JnF1b3Q7Cn0K"}}),e._v(" "),a("p",[e._v("Note: because validators may return different prices within a given round, "),a("code",[e._v("GetConsensusKey")]),e._v(" should return some constant value. This is because we will have a custom method to come to a 'consensus' about the results of the round.")]),e._v(" "),a("h2",{attrs:{id:"register-our-claim-implementation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#register-our-claim-implementation"}},[e._v("#")]),e._v(" Register Our Claim Implementation")]),e._v(" "),a("p",[e._v("We need to make sure the serialization codec knows about our concrete type.\nReg "),a("code",[e._v("types/codec.go")]),e._v(" add:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBSZWdpc3RlckludGVyZmFjZXMocmVnaXN0cnkgY2RjdHlwZXMuSW50ZXJmYWNlUmVnaXN0cnkpIHsKCXJlZ2lzdHJ5LlJlZ2lzdGVySW50ZXJmYWNlKAoJCSZxdW90O3JlbGV2YW50Y29tbXVuaXR5Lm9yYWNsZS5vcmFjbGUuQ2xhaW0mcXVvdDssCgkJKCpleHBvcnRlZE9yYWNsZS5DbGFpbSkobmlsKSwKCQkmYW1wO0F0b21Vc2R7fSwKCSkKfQo="}}),e._v(" "),a("p",[e._v("We are now ready to build our off-chian worker!")])],1)}),[],!1,null,null,null);t.default=l.exports}}]);